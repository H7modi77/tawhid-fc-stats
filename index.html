<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TAWHID FC Stats</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
body {
    background: linear-gradient(to right, #001d3d, #003566, #0f2027);
    color: white;
    font-family: 'Segoe UI', sans-serif;
    padding: 20px;
    text-align: center;
}
h2, h3 {
    color: gold;
    margin-bottom: 20px;
}
.btn-player, .btn-month, #allMonthsBtn {
    background: gold;
    color: white;
    font-weight: bold;
    margin: 5px;
    border-radius: 20px;
}
.btn-player:hover, .btn-month:hover, #allMonthsBtn:hover {
    background: #ffe680;
    color: black;
}
.table th {
    background: gold;
    color: white;
}
.table td {
    background: rgba(255,255,255,0.08);
    color: white;
}
.hidden { display: none; }
</style>
</head>
<body>

<!-- PAGE 1 â€“ PLAYER SELECTION -->
<div id="page1">
    <h2>Select Player</h2>
    <div id="playerButtons"></div>
</div>

<!-- PAGE 2 â€“ MONTH SELECTION -->
<div id="page2" class="hidden">
    <h2>Select Month</h2>
    <div id="monthButtons"></div>
    <button id="allMonthsBtn" class="btn btn-month" onclick="selectMonth('all')">All Months</button>
</div>

<!-- PAGE 3 â€“ STATISTICS -->
<div id="page3" class="hidden">
    <h2 id="statsTitle"></h2>
    <div class="table-responsive">
        <table class="table table-bordered" id="statsTable"></table>
    </div>
    <button class="btn btn-player mt-3" onclick="goHome()">Back</button>
</div>

<script>
const months = ["2025-10","2025-11","2025-12","2026-01","2026-02","2026-03","2026-04","2026-05","2026-06","2026-07","2026-08"];
const players = [
    {number:78,name:"Almousa3m",stats:{"2025-10":{matches:58,goals:65,assists:61,passRate:78,shotRate:33,motm:18,red:1,winRate:60,rating:8.7}}},
    {number:25,name:"Yo0ousef25",stats:{"2025-10":{matches:28,goals:23,assists:5,passRate:78,shotRate:46,motm:0,red:0,winRate:67,rating:8.3}}},
    {number:28,name:"H2ssain_28",stats:{"2025-10":{matches:44,goals:36,assists:15,passRate:76,shotRate:23,motm:1,red:0,winRate:56,rating:8.2}}},
    {number:7,name:"H7modi_77 ðŸ›ï¸",stats:{"2025-10":{matches:45,goals:14,assists:36,passRate:79,shotRate:33,motm:2,red:5,winRate:62,rating:8.5}}},
    {number:2,name:"Basabeso2",stats:{"2025-10":{matches:48,goals:36,assists:17,passRate:84,shotRate:40,motm:7,red:1,winRate:62,rating:8.6}}},
    {number:11,name:"M-_-_-_-11_11 â­",stats:{"2025-10":{matches:68,goals:38,assists:43,passRate:81,shotRate:27,motm:9,red:1,winRate:57,rating:8.8}}}
];

let selectedPlayer = null;

function showHome() {
    document.getElementById("page1").classList.remove("hidden");
    document.getElementById("page2").classList.add("hidden");
    document.getElementById("page3").classList.add("hidden");
}

// PAGE 1 â€“ render player buttons
const playerDiv = document.getElementById("playerButtons");
players.forEach(p=>{
    const btn = document.createElement("button");
    btn.className = "btn btn-player";
    btn.innerText = p.name;
    btn.onclick = ()=> selectPlayer(p.name);
    playerDiv.appendChild(btn);
});
const allBtn = document.createElement("button");
allBtn.className = "btn btn-player";
allBtn.innerText = "All Players";
allBtn.onclick = ()=> selectPlayer("all");
playerDiv.appendChild(allBtn);

function selectPlayer(name){
    selectedPlayer = name;
    document.getElementById("page1").classList.add("hidden");
    document.getElementById("page2").classList.remove("hidden");

    const monthDiv = document.getElementById("monthButtons");
    monthDiv.innerHTML = "";
    months.forEach(m=>{
        const btn = document.createElement("button");
        btn.className = "btn btn-month";
        btn.innerText = m;
        btn.onclick = ()=> selectMonth(m);
        monthDiv.appendChild(btn);
    });
}

// PAGE 2 â†’ select month
function selectMonth(month){
    document.getElementById("page2").classList.add("hidden");
    document.getElementById("page3").classList.remove("hidden");

    if(selectedPlayer === "all"){
        renderAllPlayers(month);
    } else {
        renderSinglePlayer(selectedPlayer, month);
    }
}

function renderSinglePlayer(name, month){
    const p = players.find(pl=>pl.name.startsWith(name));
    let stats = (month==='all') ? aggregateStats(p.stats) : (p.stats[month] || zeroStats());

    document.getElementById("statsTitle").innerText = p.name;
    document.getElementById("statsTable").innerHTML = `
        <tr><th>Matches</th><td>${stats.matches}</td></tr>
        <tr><th>Goals</th><td>${stats.goals}</td></tr>
        <tr><th>Assists</th><td>${stats.assists}</td></tr>
        <tr><th>Pass %</th><td>${stats.passRate}</td></tr>
        <tr><th>Shot %</th><td>${stats.shotRate}</td></tr>
        <tr><th>MOTM</th><td>${stats.motm}</td></tr>
        <tr><th>Red</th><td>${stats.red}</td></tr>
        <tr><th>Win %</th><td>${stats.winRate}</td></tr>
        <tr><th>Rating</th><td>${stats.rating}</td></tr>
    `;
}

function renderAllPlayers(month){
    document.getElementById("statsTitle").innerText = "All Players Comparison";

    let html = `<tr>
        <th>Name</th><th>Matches</th><th>Goals</th><th>Assists</th>
        <th>Pass%</th><th>Shot%</th><th>MOTM</th><th>Red</th>
        <th>Win%</th><th>Rating</th>
    </tr>`;

    players.forEach(p=>{
        const s = (month==='all') ? aggregateStats(p.stats) : (p.stats[month] || zeroStats());
        html += `<tr>
            <td>${p.name}</td>
            <td>${s.matches}</td>
            <td>${s.goals}</td>
            <td>${s.assists}</td>
            <td>${s.passRate}</td>
            <td>${s.shotRate}</td>
            <td>${s.motm}</td>
            <td>${s.red}</td>
            <td>${s.winRate}</td>
            <td>${s.rating}</td>
        </tr>`;
    });

    document.getElementById("statsTable").innerHTML = html;
}

function aggregateStats(statsObj){
    return Object.values(statsObj).reduce((acc, cur)=>{
        return {
            matches: acc.matches+cur.matches,
            goals: acc.goals+cur.goals,
            assists: acc.assists+cur.assists,
            passRate: Math.round((acc.passRate+cur.passRate)/2),
            shotRate: Math.round((acc.shotRate+cur.shotRate)/2),
            motm: acc.motm+cur.motm,
            red: acc.red+cur.red,
            winRate: Math.round((acc.winRate+cur.winRate)/2),
            rating: Math.round((acc.rating+cur.rating)*10/2)/10
        };
    }, zeroStats());
}

function zeroStats(){ return {matches:0,goals:0,assists:0,passRate:0,shotRate:0,motm:0,red:0,winRate:0,rating:0}; }
function goHome(){ showHome(); }

showHome();
</script>
</body>
</html>
